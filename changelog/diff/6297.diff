Index: modules/distro/src/main/files/install/build.xml
===================================================================
--- modules/distro/src/main/files/install/build.xml	(revision 6296)
+++ modules/distro/src/main/files/install/build.xml	(revision 6297)
@@ -427,9 +427,13 @@
           description="signals jboss to stop, but doesn't wait till its finished">
     <exec executable="${jboss.home}/bin/shutdown.bat"
           os="Windows 7,Windows Vista,Windows XP,Windows 2000">
+      <arg value="-s" />
+      <arg value="jnp://${jboss.bind.address}:1099" />
       <arg value="-S" />
     </exec>
     <exec executable="${jboss.home}/bin/shutdown.sh" os="Linux,Mac OS X">
+      <arg value="-s" />
+      <arg value="jnp://${jboss.bind.address}:1099" />
       <arg value="-S" />
     </exec>
   </target>
@@ -607,14 +611,15 @@
 
   <!-- ### START HSQLDB SERVER ################################################ -->
   <target name="start.hsqldb.server" if="is.hsqldb">
-    <exec executable="${hsqldb.server.install.dir}/start-hsqldb-server.bat"
-          os="Windows 7,Windows Vista,Windows XP,Windows 2000">
-      <env key="JBOSS_BINDADDR" value="${jboss.bind.address}" />
-    </exec>
-    <exec executable="${hsqldb.server.install.dir}/start-hsqldb-server.sh"
-          os="Linux,Mac OS X">
-      <env key="JBOSS_BINDADDR" value="${jboss.bind.address}" />
-    </exec>
+    <java classname="org.hsqldb.Server">
+      <classpath location="${hsqldb.server.install.dir}/hsqldb.jar" />
+      <arg value="-address" />
+      <arg value="${jboss.bind.address}" />
+      <arg value="-port" />
+      <arg value="1701" />
+      <arg value="-dbname.0" />
+      <arg value="jbpmDatabase" />
+    </java>
     <waitfor maxwait="1" maxwaitunit="minute" checkevery="10" checkeveryunit="second">
       <socket server="${jboss.bind.address}" port="1701" />
     </waitfor>
